"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const axios_1=require("axios");function responseMap(t,r){var e=t.headers["content-type"].split(";")[0];return["text/plain","text/html"].includes(e)?{longUrl:r,shortUrl:t.data}:null!=(e=t.data)&&e.url?{longUrl:r,shortUrl:t.data.url}:null!=(e=t.data)&&e.shortUrl?{longUrl:r,shortUrl:t.data.shortUrl}:null!=(e=t.data)&&e.shortenedUrl?{longUrl:r,shortUrl:t.data.shortenedUrl}:null!=(e=t.data)&&e.short?{longUrl:r,shortUrl:t.data.short}:null!=(e=t.data)&&e.short_url?{longUrl:r,shortUrl:t.data.short_url}:void 0}const getAxios=(t,r,e)=>"get"===t.method?axios_1.default.get(t.url+r,{timeout:e.timeout}):axios_1.default.post(t.url,t.body(r),{timeout:e.timeout}),ValidProviders={isgd:{url:"https://is.gd/create.php?format=simple&url=",method:"get"},kroom:{url:"https://www.kroom.tk/short?url=",method:"get"},tinyurl:{url:"https://tinyurl.com/api-create.php?url=",method:"get"},cdpt:{url:"https://cdpt.in/shorten?url=",method:"get"},"4hnet":{url:"https://4h.net/api.php?url=",method:"get"},tinube:{url:"https://api.tinu.be/api/shorten",method:"post",body:t=>({longUrl:t})}};exports.default=async(t,r={provider:"isgd",timeout:2e3})=>{try{return responseMap(await getAxios(ValidProviders[r.provider],t,r),t)}catch(t){throw new Error(t)}};